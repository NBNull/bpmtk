<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="Bpmtk.Engine"
                   namespace="Bpmtk.Engine.Models">

  <class name="IdentityLink" table="bpm_identity_link"
         dynamic-update="true">
    <id name="Id" column="id">
      <generator class="identity"/>
    </id>
    <discriminator column="category" type="String" length="10"/>
    
    <property name="Type" column="type" length="50"/>
    <property name="Ordinal" column="ordinal" not-null="true" />
    
    <many-to-one name="User"
               class="Bpmtk.Engine.Models.User"
               column="user_id"/>

    <many-to-one name="Group"
               class="Bpmtk.Engine.Models.Group"
               column="group_id"/>
    
    <subclass name="InstanceIdentityLink" discriminator-value="Instance">
    </subclass>
    <subclass name="ActivityIdentityLink" discriminator-value="Activity">
    </subclass>
    <subclass name="DefinitionIdentityLink" discriminator-value="Activity">
    </subclass>
  </class>

</hibernate-mapping>
